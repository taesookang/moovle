(this.webpackJsonpwatchlist=this.webpackJsonpwatchlist||[]).push([[0],{91:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(39),a=n.n(c),s=n(19),i=n(4),u=n(5),o=n(2),l=Object(r.createContext)();function j(e){var t=e.children,n=Object(r.useState)(""),c=Object(u.a)(n,2),a=c[0],s=c[1];return Object(o.jsx)(l.Provider,{value:{query:a,setQuery:s},children:t})}var d=n(14),b=localStorage.getItem("watchlist")?JSON.parse(localStorage.getItem("watchlist")):[],p=Object(r.createContext)(),v=function(e){var t=Object(r.useState)(b),n=Object(u.a)(t,2),c=n[0],a=n[1];Object(r.useEffect)((function(){localStorage.setItem("watchlist",JSON.stringify(c))}),[c]);return Object(o.jsx)(p.Provider,{value:{watchlist:c,setWatchlist:a,addMovieToWatchlist:function(e){a([e].concat(Object(d.a)(c)))},removeMovieFromWatchlist:function(e){a(c.filter((function(t){return t.id!==e})))}},children:e.children})},h=n(3),O=n.n(h),f=n(7),m=n(15),x=n.n(m),g="346305739fd2191481b6caec12386ff2",w="https://api.themoviedb.org/3",_="".concat(w,"/movie/now_playing"),N="".concat(w,"/movie/top_rated"),k="".concat(w,"/movie"),y="".concat(w,"/genre/movie/list"),S="".concat(w,"/discover/movie"),C="".concat(w,"/search/movie"),E="".concat(w,"/movie/popular"),G=function(){var e=Object(f.a)(O.a.mark((function e(t){var n,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get(_,{params:{api_key:g,language:"en_US",page:t}});case 3:return n=e.sent,r=n.data,c=r.results,e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(f.a)(O.a.mark((function e(){var t,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get(y,{params:{api_key:g,language:"en_US",page:1}});case 3:return t=e.sent,n=t.data,r=n.genres.map((function(e){return{id:e.id,name:e.name}})),e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(f.a)(O.a.mark((function e(t,n){var r,c,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get(S,{params:{api_key:g,language:"en_US",page:n,with_genres:t}});case 3:return r=e.sent,c=r.data,a=c.results,e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=Object(f.a)(O.a.mark((function e(t){var n,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get(N,{params:{api_key:g,language:"en_US",page:t}});case 3:return n=e.sent,r=n.data,c=r.results,e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(f.a)(O.a.mark((function e(t){var n,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get(E,{params:{api_key:g,language:"en_US",page:t}});case 3:return n=e.sent,r=n.data,c=r.results,e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(f.a)(O.a.mark((function e(t){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("".concat(k,"/").concat(t,"/videos"),{params:{api_key:g}});case 3:return n=e.sent,r=n.data,e.abrupt("return",r.results[0]);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(f.a)(O.a.mark((function e(t,n){var r,c,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get(C,{params:{api_key:g,language:"en_US",page:n,query:t}});case 3:return r=e.sent,c=r.data,a=c.results,e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),F=n(40);function I(e){var t=e.selectedGenre,n=e.setSelectedGenre,c=Object(r.useState)([{id:1,name:"Now Playing"},{id:2,name:"Popular"},{id:3,name:"Top Rated"}]),a=Object(u.a)(c,2),s=a[0],i=a[1],l=Object(r.useState)(!1),j=Object(u.a)(l,2),b=j[0],p=j[1];return Object(r.useEffect)((function(){(function(){var e=Object(f.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:t=e.sent,i((function(e){return[].concat(Object(d.a)(e),Object(d.a)(t))}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(o.jsxs)("div",{className:"genres",children:[Object(o.jsxs)("div",{className:"genres__menu",children:[Object(o.jsx)("span",{children:t.name}),Object(o.jsx)(F.a,{onClick:function(){return p((function(e){return!e}))},className:"genres__button ".concat(b&&"open")})]}),Object(o.jsx)("div",{className:"genres__container ".concat(b&&"open"),children:Object(o.jsx)(J,{genres:s,setGenreOpen:p,setSelectedGenre:n,genreOpen:b})})]})}function J(e){var t=e.genres,n=e.genreOpen,r=e.setGenreOpen,c=e.setSelectedGenre;return Object(o.jsx)("div",{className:"genrelist",children:t.map((function(e){return Object(o.jsx)("div",{className:"genre ".concat(n&&"open"),onClick:function(){return function(e){r(!1),c(e)}(e)},children:e.name},e.id)}))})}var L=n(18),R=n(21),Q=n(41),Y=n.n(Q),A=function(e,t){var n=function(n){e.current&&!e.current.contains(n.target)&&t()};Object(r.useEffect)((function(){return document.addEventListener("click",n),function(){document.removeEventListener("click",n)}}))};function B(e){var t=e.movie,n=e.setModalOpen,c=e.movieObj,a=Object(r.useContext)(p),s=a.addMovieToWatchlist,i=a.removeMovieFromWatchlist,l=a.watchlist,j=Object(r.useState)(""),d=Object(u.a)(j,2),b=d[0],v=d[1],h=Object(r.useState)(!1),m=Object(u.a)(h,2),x=m[0],g=m[1],w=null!==t.backdrop&&"https://image.tmdb.org/t/p/w780/"+t.backdrop,_=l.find((function(e){return e.id===t.id}));Object(r.useEffect)((function(){(function(){var e=Object(f.a)(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t.id);case 2:void 0!==(n=e.sent)&&v("https://www.youtube.com/embed/"+n.key);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),_&&g(!0)}),[t.id,_]);var N=Object(r.useRef)();A(N,(function(){n(!1)})),console.log(t);return Object(o.jsxs)("div",{className:"modal",ref:N,children:[Object(o.jsx)(L.a,{className:"modal__close",onClick:function(){return n(!1)}}),Object(o.jsxs)("div",{className:"modal__container",children:[Object(o.jsx)("div",{className:"modal__video",children:""!==b?Object(o.jsx)(Y.a,{className:"video",url:b,onPlay:function(){},playing:!0,width:"100%",height:"100%",config:{youtube:{playerVars:{controls:1,iv_load_policy:3}}}}):w?Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("img",{className:"filler-video",src:w,style:{width:"100%",height:"auto"},alt:""})}):Object(o.jsxs)("div",{className:"no-video",children:[Object(o.jsx)(R.c,{}),Object(o.jsx)("h3",{children:" No trailer available "})]})}),Object(o.jsxs)("div",{className:"modal__content",children:[Object(o.jsxs)("div",{className:"content",children:[Object(o.jsx)("div",{className:"title",children:t.title}),Object(o.jsxs)("div",{className:"info",children:[""!==t.release&&Object(o.jsx)("div",{className:"release",children:t.release}),0!==t.rate&&Object(o.jsxs)("div",{className:"rate",children:[Object(o.jsx)(R.b,{}),t.rate.toFixed(1)]})]}),Object(o.jsx)("div",{className:"line"}),Object(o.jsx)("div",{className:"overview",children:t.overview})]}),Object(o.jsx)("div",{className:"add-btn",children:Object(o.jsxs)("button",{className:x?"in-list":void 0,onClick:function(){x?i(t.id):s(c),g((function(e){return!e}))},children:[Object(o.jsx)(L.b,{}),Object(o.jsx)("span",{children:x?"Remove from Watchlist":"Add to Watchlist"})]})})]})]})]})}function D(e){var t=e.movieObj,n=Object(r.useState)(!1),c=Object(u.a)(n,2),a=c[0],s=c[1],i={id:t.id,title:t.title,release:t.release_date,overview:t.overview,poster:t.poster_path,rate:t.vote_average,rateCount:t.vote_count,backdrop:t.backdrop_path},l="https://image.tmdb.org/t/p/w200"+i.poster;return Object(r.useEffect)((function(){a?function(){var e=window.pageYOffset||document.documentElement.scrollTop,t=window.pageXOffset||document.documentElement.scrollLeft;window.onscroll=function(){window.scrollTo(t,e)}}():window.onscroll=function(){}}),[a]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"card",children:[Object(o.jsx)("div",{className:"card__poster ".concat(null===i.poster&&"notfound"),onClick:function(){return s((function(e){return!e}))},children:Object(o.jsx)("img",{src:null!==i.poster?l:"".concat("/moovle/images/logo.png"),alt:""})}),Object(o.jsx)("div",{className:"card__title",children:i.title}),Object(o.jsx)("div",{className:"card__release",children:i.release?i.release.substring(0,4):"-"})]}),a&&Object(o.jsx)(B,{movie:i,setModalOpen:s,movieObj:t})]})}var V=n(42);function X(){return Object(o.jsxs)("div",{className:"no-result",children:[Object(o.jsx)(R.a,{}),Object(o.jsx)("h1",{children:"No results found."}),Object(o.jsx)("span",{children:"Try searching for something else."})]})}function z(e){var t=e.selectedGenre,n=Object(r.useState)([]),c=Object(u.a)(n,2),a=c[0],s=c[1],i=Object(r.useState)(1),j=Object(u.a)(i,2),b=j[0],p=j[1],v=Object(r.useContext)(l).query;Object(r.useEffect)((function(){(function(){var e=Object(f.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===v){e.next=8;break}return e.t0=s,e.next=4,U(v,1);case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=13;break;case 8:return e.t2=s,e.next=11,h(t.id,1);case 11:e.t3=e.sent,(0,e.t2)(e.t3);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,v]);var h=function(){var e=Object(f.a)(O.a.mark((function e(t,n){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],e.t0=t,e.next=1===e.t0?4:2===e.t0?8:3===e.t0?12:16;break;case 4:return e.next=6,G(n);case 6:return r=e.sent,e.abrupt("break",20);case 8:return e.next=10,P(n);case 10:return r=e.sent,e.abrupt("break",20);case 12:return e.next=14,q(n);case 14:return r=e.sent,e.abrupt("break",20);case 16:return e.next=18,W(t,n);case 18:return r=e.sent,e.abrupt("break",20);case 20:return e.abrupt("return",r);case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(f.a)(O.a.mark((function e(t,n){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===v){e.next=6;break}return e.next=3,U(v,n);case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,h(t,n);case 8:e.t0=e.sent;case 9:r=e.t0,p((function(e){return e+1})),s((function(e){return[].concat(Object(d.a)(e),Object(d.a)(r))}));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return 0!==a.length?Object(o.jsx)(V.a,{className:"movielist",dataLength:a.length,hasMore:!0,next:function(){return m(t.id,b+1)},children:a.map((function(e){return Object(o.jsx)(D,{movieObj:e},e.id)}))}):""!==v&&Object(o.jsx)(X,{})}function H(){var e=Object(r.useContext)(l).query,t=Object(r.useState)({id:1,name:"Now Playing"}),n=Object(u.a)(t,2),c=n[0],a=n[1];return Object(o.jsx)("div",{className:"main",children:Object(o.jsxs)("div",{className:"main__container",children:[""===e?Object(o.jsx)(I,{selectedGenre:c,setSelectedGenre:a}):Object(o.jsxs)("h2",{className:"query-result",children:["Results with ",Object(o.jsxs)("span",{children:['"',e,'"']})]}),Object(o.jsx)(z,{selectedGenre:c})]})})}var K=n(44);function Z(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(r.useContext)(l),j=a.query,d=a.setQuery,b=Object(r.useContext)(p).watchlist,v=""!==j,h=Object(i.f)(),O=function(){window.location.href="/"};return Object(o.jsx)("div",{className:"header",children:Object(o.jsxs)("div",{className:"header__container",children:[Object(o.jsx)(s.b,{to:"/",onClick:O,children:Object(o.jsxs)("div",{className:"logo",children:[Object(o.jsx)("img",{src:"/moovle/images/logo.png",alt:""}),Object(o.jsx)("h2",{children:"Moovle"})]})}),Object(o.jsxs)("div",{className:"menu",children:[Object(o.jsxs)("div",{className:"menu__search ".concat(n&&"open"),children:[Object(o.jsx)(L.c,{onClick:function(){h.push("/"),c((function(e){return!e}));n&&d("")}}),Object(o.jsx)("input",{className:"menu__search__input",type:"text",value:j,onChange:function(e){e.preventDefault(),d(e.target.value)}}),Object(o.jsx)("div",{className:"menu__search__cancel ".concat(v&&"visible"),onClick:function(){return d("")},children:"\u2715"})]}),Object(o.jsx)(s.b,{to:"/",onClick:O,children:Object(o.jsx)("div",{className:"menu__home",children:Object(o.jsx)(K.a,{})})}),Object(o.jsx)(s.b,{to:"/watchlist",onClick:function(){return c(!1)},children:Object(o.jsxs)("div",{className:"menu__watchlist",children:[Object(o.jsx)(L.b,{}),Object(o.jsx)("div",{className:"indicator",children:b.length})]})})]})]})})}function $(){var e=Object(r.useContext)(p).watchlist;return Object(o.jsxs)("div",{className:"watchlist",children:[Object(o.jsxs)("div",{className:"watchlist__label",children:[Object(o.jsx)("h2",{children:"My Watchlist"}),Object(o.jsxs)("p",{children:[" You have ",e.length," ","".concat(e.length>1?"movies":"movie")," to watch"]})]}),Object(o.jsx)("div",{className:"watchlist__container",children:Object(o.jsx)("div",{className:"watchlist__list",children:e.map((function(e){return Object(o.jsx)(D,{movieObj:e},e.id)}))})})]})}var ee=function(){return Object(o.jsx)(v,{children:Object(o.jsx)(j,{children:Object(o.jsxs)(s.a,{children:[Object(o.jsx)(Z,{}),Object(o.jsxs)(i.c,{children:[Object(o.jsx)(i.a,{exact:!0,path:"/watchlist",component:$}),Object(o.jsx)(i.a,{path:"/",component:H})]})]})})})};n(91);a.a.render(Object(o.jsx)(ee,{}),document.getElementById("root"))}},[[92,1,2]]]);
//# sourceMappingURL=main.7e98e151.chunk.js.map